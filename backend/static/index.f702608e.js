import{d as Y,D as Z,U as ee,r as p,a as j,c as A,b as e,w as o,e as i,u as r,V as oe,E as le,F as N,g as n,o as T,h as te,i as u,$ as ae,t as D,a0 as ne,l as ue,k as se,n as de,a1 as ie,p as re,q as U,s as m}from"./index.83d05bfc.js";import{V as ce}from"./VAppBar.fd283591.js";import{_ as _e}from"./_plugin-vue_export-helper.a81e96fd.js";const pe={style:{padding:"0 20px"}},me={class:"sheader"},fe={class:"sheader-left"},ve={style:{padding:"0 30px"}},be={class:"dialog-footer"},we={style:{"font-weight":"700"}},ge={class:"dialog-footer"},De=Y({__name:"index",setup(Be){var V,y;const I=re(),f=Z(),B=ee(),L=p(),O=f.data.lives,C=a=>{window.open(`/live/chart/${a.id}`)},d=[];for(let a in f.data.projects)d.push({value:f.data.projects[a].id,label:f.data.projects[a].name});const v=j({true:{icon:"mdi-play",color:"#5CB85C"},false:{icon:"mdi-stop",color:"#777777"}}),b=p(!1),s=j({name:"",project:((V=d[0])==null?void 0:V.value)==null?(y=d[0])==null?void 0:y.value:""}),R=()=>{if(s.name!=""){let a=null;for(let t in d)console.log(d),console.log(s.project),d[t].value==s.project&&(a=d[t].value);U.get(`${B.ip}${B.newlive}?id=${a}&name=${s.name}`).then(t=>{m({message:"\u521B\u5EFA\u6210\u529F",type:"success"}),location.reload()}).catch(()=>{m.error("\u521B\u5EFA\u5931\u8D25")})}},w=p(!1),k=p("");let E=p();const S=a=>{E.value=a,k.value=`${a.name}`,w.value=!0},q=a=>{U.get(`http://127.0.0.1:10010/api/delive?id=${a.id}`).then(t=>{t.data.code=="10015"?m.error("\u5B9E\u76D8\u6B63\u5728\u8FD0\u884C"):(m({message:"\u5220\u9664\u6210\u529F",type:"success"}),location.reload())}).catch(t=>{console.log(t),m.error("\u5220\u9664\u5931\u8D25")})},z=a=>{I.push(`/s/code/${a.projectId.id}`)};return(a,t)=>{const M=n("el-breadcrumb-item"),P=n("el-breadcrumb"),c=n("el-button"),F=n("el-link"),_=n("el-table-column"),G=n("el-icon"),$=n("el-dropdown-item"),H=n("el-dropdown-menu"),J=n("el-dropdown"),K=n("el-input"),h=n("el-form-item"),Q=n("el-option"),W=n("el-select"),X=n("el-form"),x=n("el-dialog");return T(),A(N,null,[e(ce,{class:"bar",elevation:1},{default:o(()=>[e(P,{"separator-icon":r(te)},{default:o(()=>[e(M,{to:{path:"/"}},{default:o(()=>[u("\u5B9E\u76D8")]),_:1})]),_:1},8,["separator-icon"])]),_:1}),i("div",pe,[i("div",me,[i("div",fe,[e(c,{onClick:t[0]||(t[0]=l=>b.value=!0),icon:r(ae)},{default:o(()=>[u("\u521B\u5EFA\u5B9E\u76D8")]),_:1},8,["icon"])])]),e(oe),e(r(le),{ref_key:"multipleTableRef",ref:L,data:r(O),"table-layout":"fixed",style:{width:"100%",cursor:"default"}},{default:o(()=>[e(_,{label:"\u540D\u79F0"},{default:o(l=>[e(F,{onClick:g=>C(l.row)},{default:o(()=>[u(D(l.row.name),1)]),_:2},1032,["onClick"])]),_:1}),e(_,{label:"\u9879\u76EE"},{default:o(l=>[e(F,{style:{"font-style":"italic"},type:"info",onClick:g=>z(l.row)},{default:o(()=>[u(D(l.row.projectId.name),1)]),_:2},1032,["onClick"])]),_:1}),e(_,{label:"\u72B6\u6001"},{default:o(l=>[e(ne,{icon:l.row.state?v.true.icon:v.false.icon,color:l.row.state?v.true.color:v.false.color,size:"20"},null,8,["icon","color"])]),_:1}),e(_,{prop:"time",label:"\u521B\u5EFA\u65F6\u95F4"}),e(_,{label:"\u64CD\u4F5C\u9879",width:"110"},{default:o(l=>[e(J,{trigger:"click"},{dropdown:o(()=>[e(H,null,{default:o(()=>[e($,{icon:r(ue),onClick:g=>C(l.row)},{default:o(()=>[u("\u6253\u5F00")]),_:2},1032,["icon","onClick"]),e($,{icon:r(se),onClick:g=>S(l.row)},{default:o(()=>[u("\u5220\u9664")]),_:2},1032,["icon","onClick"])]),_:2},1024)]),default:o(()=>[e(c,null,{default:o(()=>[u(" \u64CD\u4F5C "),e(G,{class:"el-icon--right"},{default:o(()=>[e(r(de))]),_:1})]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data"])]),e(x,{modelValue:b.value,"onUpdate:modelValue":t[4]||(t[4]=l=>b.value=l),title:"\u521B\u5EFA\u5B9E\u76D8"},{footer:o(()=>[i("span",be,[e(c,{onClick:t[3]||(t[3]=l=>b.value=!1)},{default:o(()=>[u("\u53D6\u6D88")]),_:1}),e(c,{type:"primary",onClick:R},{default:o(()=>[u(" \u521B\u5EFA ")]),_:1})])]),default:o(()=>[e(X,{model:s},{default:o(()=>[i("div",ve,[e(h,{label:"\u7B56\u7565\u540D\u79F0"},{default:o(()=>[e(K,{modelValue:s.name,"onUpdate:modelValue":t[1]||(t[1]=l=>s.name=l),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(h,{label:"\u9009\u62E9\u7B56\u7565"},{default:o(()=>[e(W,{modelValue:s.project,"onUpdate:modelValue":t[2]||(t[2]=l=>s.project=l),class:"m-2",placeholder:"Select"},{default:o(()=>[(T(),A(N,null,ie(d,l=>e(Q,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})])]),_:1},8,["model"])]),_:1},8,["modelValue"]),e(x,{modelValue:w.value,"onUpdate:modelValue":t[7]||(t[7]=l=>w.value=l),title:"\u786E\u5B9A\u63D0\u793A",width:"30%"},{footer:o(()=>[i("span",ge,[e(c,{onClick:t[5]||(t[5]=l=>w.value=!1)},{default:o(()=>[u("\u53D6\u6D88")]),_:1}),e(c,{type:"primary",onClick:t[6]||(t[6]=l=>q(r(E)))},{default:o(()=>[u(" \u786E\u5B9A ")]),_:1})])]),default:o(()=>[i("span",null,[u(" \u786E\u5B9A\u8981\u5220\u9664\u5B9E\u76D8 "),i("span",we,D(k.value),1),u(" \u5417? ")])]),_:1},8,["modelValue"])],64)}}});const Ve=_e(De,[["__scopeId","data-v-e354a23e"]]);export{Ve as default};
